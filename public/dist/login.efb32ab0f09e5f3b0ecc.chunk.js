"use strict";(self.webpackChunke_commerce_website=self.webpackChunke_commerce_website||[]).push([["login"],{"./src/client/pages/LoginPage.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "./node_modules/@babel/runtime/helpers/esm/slicedToArray.js");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.function.name.js */ "./node_modules/core-js/modules/es.function.name.js");\n/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router/dist/development/chunk-LSOULM7L.mjs");\n/* harmony import */ var _services_api__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../services/api */ "./src/client/services/api.js");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react/jsx-runtime */ "./node_modules/react/jsx-runtime.js");\n\n\n\n\n\n\n\n\nfunction LoginPage() {\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(\'\'),\n    _useState2 = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__["default"])(_useState, 2),\n    email = _useState2[0],\n    setEmail = _useState2[1];\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(\'\'),\n    _useState4 = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__["default"])(_useState3, 2),\n    password = _useState4[0],\n    setPassword = _useState4[1];\n  var _useState5 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(\'\'),\n    _useState6 = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__["default"])(_useState5, 2),\n    error = _useState6[0],\n    setError = _useState6[1];\n  var _useState7 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false),\n    _useState8 = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__["default"])(_useState7, 2),\n    loading = _useState8[0],\n    setLoading = _useState8[1];\n  var _useState9 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false),\n    _useState10 = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__["default"])(_useState9, 2),\n    showPassword = _useState10[0],\n    setShowPassword = _useState10[1];\n  var navigate = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_7__.useNavigate)();\n\n  // Toggle password visibility\n  var togglePasswordVisibility = function togglePasswordVisibility() {\n    setShowPassword(!showPassword);\n  };\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])(/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee(e) {\n      var response;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            e.preventDefault();\n\n            // Reset error\n            setError(\'\');\n\n            // Validate form\n            if (!(!email || !password)) {\n              _context.next = 5;\n              break;\n            }\n            setError(\'Please enter both email and password\');\n            return _context.abrupt("return");\n          case 5:\n            setLoading(true);\n            _context.prev = 6;\n            _context.next = 9;\n            return _services_api__WEBPACK_IMPORTED_MODULE_5__.AuthAPI.login({\n              email: email,\n              password: password\n            });\n          case 9:\n            response = _context.sent;\n            if (response.success && response.token) {\n              // Store the token and user info\n              localStorage.setItem(\'token\', response.token);\n              localStorage.setItem(\'isLoggedIn\', \'true\');\n              localStorage.setItem(\'userName\', response.data.name || \'User\');\n              localStorage.setItem(\'userRole\', response.data.role || \'user\');\n\n              // Dispatch storage event for other components to detect the change\n              window.dispatchEvent(new Event(\'storage\'));\n\n              // Redirect to home page\n              navigate(\'/\');\n            } else {\n              setError(response.message || \'Login failed. Please try again.\');\n            }\n            _context.next = 17;\n            break;\n          case 13:\n            _context.prev = 13;\n            _context.t0 = _context["catch"](6);\n            console.error(\'Login error:\', _context.t0);\n            setError(\'Login failed. Please check your credentials and try again.\');\n          case 17:\n            _context.prev = 17;\n            setLoading(false);\n            return _context.finish(17);\n          case 20:\n          case "end":\n            return _context.stop();\n        }\n      }, _callee, null, [[6, 13, 17, 20]]);\n    }));\n    return function handleSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div", {\n    className: "container",\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div", {\n      className: "auth-container",\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div", {\n        className: "auth-form-container",\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("h2", {\n          children: "Login to Your Account"\n        }), error && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div", {\n          className: "alert alert-danger",\n          children: error\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("form", {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div", {\n            className: "form-group",\n            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("label", {\n              htmlFor: "email",\n              children: "Email Address"\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("input", {\n              type: "email",\n              id: "email",\n              value: email,\n              onChange: function onChange(e) {\n                return setEmail(e.target.value);\n              },\n              placeholder: "Enter your email",\n              required: true\n            })]\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div", {\n            className: "form-group",\n            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("label", {\n              htmlFor: "password",\n              children: "Password"\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div", {\n              className: "password-input-container",\n              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("input", {\n                type: showPassword ? "text" : "password",\n                id: "password",\n                value: password,\n                onChange: function onChange(e) {\n                  return setPassword(e.target.value);\n                },\n                placeholder: "Enter your password",\n                required: true\n              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("span", {\n                className: "password-toggle",\n                onClick: togglePasswordVisibility,\n                children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("i", {\n                  className: "fas ".concat(showPassword ? \'fa-eye-slash\' : \'fa-eye\')\n                })\n              })]\n            })]\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div", {\n            className: "form-group",\n            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("button", {\n              type: "submit",\n              className: "btn btn-primary btn-block",\n              disabled: loading,\n              children: loading ? \'Logging in...\' : \'Login\'\n            })\n          })]\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div", {\n          className: "auth-links",\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("p", {\n            children: ["Don\'t have an account? ", /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_7__.Link, {\n              to: "/register",\n              children: "Register"\n            })]\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("p", {\n            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_7__.Link, {\n              to: "/forgot-password",\n              children: "Forgot Password?"\n            })\n          })]\n        })]\n      })\n    })\n  });\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (LoginPage);\n\n//# sourceURL=webpack://e-commerce-website/./src/client/pages/LoginPage.js?')}}]);